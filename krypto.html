<!doctype html><html lang="de"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Krypto – CGAI</title>
<link rel="stylesheet" href="css/style.css">
<script src="js/i18n.js"></script>
<script defer src="js/app.js"></script>
</head><body>
<header class="site-header">
  <div class="header-bar">
    <a class="brand" href="index.html" aria-label="Startseite">
      <img class="brand__logo" src="assets/logo-gold.svg" alt="CGAI Logo" />
      <span class="brand__wordmark">C G A I</span>
    </a>

    <div class="header-actions">
      <div class="lang-switch">
        <button id="lang-de" class="pill" aria-label="Deutsch">
          <img src="https://flagcdn.com/w20/de.png" alt="DE" />
          <span>DE</span>
        </button>
        <button id="lang-en" class="pill" aria-label="English">
          <img src="https://flagcdn.com/w20/gb.png" alt="EN" />
          <span>EN</span>
        </button>
      </div>

      <a href="login.html" class="btn btn-gold">Login</a>
      <button id="burger" class="btn btn-outline icon" aria-label="Menü öffnen" aria-expanded="false" aria-controls="nav-drawer">
        <span class="burger-lines"></span>
      </button>
    </div>
  </div>

  <!-- Off-canvas Drawer -->
  <div id="nav-backdrop" class="nav-backdrop" hidden></div>
  <nav id="nav-drawer" class="nav-drawer" aria-hidden="true">
    <div class="drawer-header">
      <span class="drawer-title">Navigation</span>
      <button id="drawer-close" class="btn icon" aria-label="Menü schließen">×</button>
    </div>

    <ul class="drawer-list">
      <li><a href="index.html" data-i18n="nav_start">Start</a></li>
      <li class="drawer-group">
        <button class="group-toggle" aria-expanded="false">Krypto</button>
        <ul class="group-list">
          <li><a href="krypto.html" data-i18n="nav_krypto">Übersicht & Live‑Chart</a></li>
          <li><a href="krypto.html#prognose">KI‑Prognose</a></li>
        </ul>
      </li>
      <li class="drawer-group">
        <button class="group-toggle" aria-expanded="false">Shop</button>
        <ul class="group-list">
          <li><a href="shop.html#trader">Trader</a></li>
          <li><a href="shop.html#investoren">Investoren</a></li>
          <li><a href="shop.html#anfaenger">Anfänger</a></li>
        </ul>
      </li>
      <li><a href="blog.html" data-i18n="nav_blog">Blog</a></li>
      <li><a href="about.html" data-i18n="nav_about">Über uns</a></li>
    </ul>
  </nav>
</header>

<main class="container">
  <section class="hero">
    <h1>Krypto Marktübersicht</h1>
    <div id="tv-total" class="card"></div>
  </section>
  <section class="grid cols-3">
    <div class="card stack"><h3 data-i18n="cats_trader">Trader</h3><p class="notice" data-i18n="trader_desc"></p><a href="shop.html#trader" class="btn" data-i18n="more">Mehr</a></div>
    <div class="card stack"><h3 data-i18n="cats_investor">Investoren</h3><p class="notice" data-i18n="investor_desc"></p><a href="shop.html#investor" class="btn" data-i18n="more">Mehr</a></div>
    <div class="card stack"><h3 data-i18n="cats_anf">Anfänger</h3><p class="notice" data-i18n="anf_desc"></p><a href="shop.html#anfaenger" class="btn" data-i18n="more">Mehr</a></div>
  </section>
<section class="container section">
  <h2>Gesamtmarkt – Live‑Chart</h2>
  <div class="card">
    <!-- TradingView Widget -->
    <div class="tradingview-widget-container">
      <div id="tvchart" style="height:420px;"></div>
    </div>
  </div>
</section>

<section id="prognose" class="container section">
  <h2>KI‑Prognose (Beta)</h2>
  <div class="card">
    <label for="coin">Coin (z.B. bitcoin, ethereum, solana, ripple)</label>
    <input id="coin" placeholder="bitcoin" />
    <button id="run-model" class="btn btn-gold">Prognose berechnen</button>
    <p id="model-note" class="small">Keine Finanzberatung.</p>
    <div id="model-out" class="muted"></div>
  </div>
</section>

<script src="https://s3.tradingview.com/tv.js"></script>
<script>
  // TradingView init (Total Market Cap, $)
  new TradingView.widget({
    container_id: "tvchart",
    autosize: true,
    symbol: "CRYPTOCAP:TOTAL",
    interval: "D",
    timezone: "Etc/UTC",
    theme: "dark",
    style: "1",
    locale: "de",
    hide_top_toolbar: true,
    hide_legend: false,
    allow_symbol_change: false,
  });

  // Simple, nachvollziehbare Modell-Prognose (ohne API-Key)
  const list = ["bitcoin","ethereum","solana","ripple","cardano","dogecoin","shiba-inu","polkadot","chainlink","litecoin","tron","matic","uniswap","stellar","aptos","arbitrum","internet-computer","vechain","vethor-token"];
  const multipliers = {base: 1.0, momentum: 0.18, damp: 0.65}; // konservativ
  const pretty = (x) => new Intl.NumberFormat('de-DE',{minimumFractionDigits:2, maximumFractionDigits:2}).format(x);

  document.getElementById('run-model').addEventListener('click', async () => {
    const out = document.getElementById('model-out');
    let c = document.getElementById('coin').value.trim().toLowerCase();
    if (!list.includes(c)) { out.textContent = "Unbekannter Coin. Beispiele: " + list.slice(0,8).join(", ") + " …"; return; }

    // Preis ohne API-Key (Coingecko Free braucht serverseitig; hier Demo-Modell: Referenzwerte & Momentum-Schätzung)
    // Idee: hol dir später echte Preise serverseitig (Cloud Function) und ersetze dieses Modul.
    const seed = Math.abs([...c].reduce((a,ch)=>a+ch.charCodeAt(0),0));
    const now = (seed % 3000) + 50; // simuliert "aktuellen" USD-Preisbereich je Asset
    const momentum = ((seed % 37) - 18)/100; // -0.18 .. +0.18
    const next = now * (multipliers.base + momentum * multipliers.damp);

    out.innerHTML = `
      <div class="card" style="margin-top:12px">
        <strong>Aktuell (Demo):</strong> $${pretty(now)}<br/>
        <strong>1‑Jahres‑Prognose (konservativ):</strong> $${pretty(next)} (${( (next/now-1)*100 ).toFixed(1)}%)
      </div>
    `;
  });
</script>
</main>

<footer>
  <div class="container">
    <div class="small">© 2025 CGAI</div>
    <div class="small">
      <a href="disclaimer.html" data-i18n="footer_disclaimer">Disclaimer</a> ·
      <a href="terms.html" data-i18n="footer_terms">Nutzungsbedingungen</a> ·
      <a href="privacy.html" data-i18n="footer_privacy">Datenschutz</a>
    </div>
  </div>
</footer>
</body></html>
